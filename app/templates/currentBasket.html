{% extends 'base.html' %}

{% block title %}Basket - The Divine Jewelry{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/basketStyle.css') }}">
{% endblock %}

{% block content %}
<div class="cart-header">
    <h1 class="section-title">My Shopping Basket</h1>
    <a href="{{ url_for('routes.products') }}" class="btn-primary" style="width: auto; display: inline-block; padding: 8px 15px;">
        Continue Shopping
    </a>
</div>

<main class="basket-page">
    <section class="recommended-section">
        <h2 class="section-title">Your Items</h2>
        <div id="basket-container">
            <div id="empty-cart-message" class="empty-cart">
                <div class="empty-cart-icon">ðŸ›’</div>
                <h3>Your basket is empty</h3>
                <p>Browse our collections and add some beautiful pieces to your basket.</p>
                <a href="{{ url_for('routes.products') }}" class="btn-primary continue-shopping">Shop Now</a>
            </div>
        </div>

        <h2 class="section-title">Recommended For You</h2>
        <div class="product-grid">
            <div class="product-card">
                <img src="{{ url_for('static', filename='images/leaf_ring_1.webp') }}" alt="Elegant leaf design">
                <div class="product-info">
                    <h3>Elegant Leaf Ring</h3>
                    <p class="product-price">Â£150.00</p>
                    <button class="btn-primary add-btn" data-id="leaf-ring-1" data-name="Elegant Leaf Ring" data-price="150.00">Add to Basket</button>
                </div>
            </div>
            
            <div class="product-card">
                <img src="{{ url_for('static', filename='images/crystal_ring_1.jpg') }}" alt="Crystal ring">
                <div class="product-info">
                    <h3>Crystal Ring</h3>
                    <p class="product-price">Â£180.00</p>
                    <button class="btn-primary add-btn" data-id="crystal-ring-1" data-name="Crystal Ring" data-price="180.00">Add to Basket</button>
                </div>
            </div>
            
            <div class="product-card">
                <img src="{{ url_for('static', filename='images/pearl_necklace_1.webp') }}" alt="Pearl necklace">
                <div class="product-info">
                    <h3>Pearl Necklace</h3>
                    <p class="product-price">Â£250.00</p>
                    <button class="btn-primary add-btn" data-id="pearl-necklace-1" data-name="Pearl Necklace" data-price="250.00">Add to Basket</button>
                </div>
            </div>
        </div>
    </section>

    <aside class="order-summary">
        <h2 class="section-title">Order Summary</h2>
        <ul id="order-summary-list">
        </ul>
        <p id="order-total"><strong>Total: Â£0.00</strong></p>
        <button class="btn-primary" onclick="showPromoPopup()">Enter Promo Code</button>
        <button class="btn-primary checkout-btn" onclick="handleCheckout()">Proceed to Checkout</button>
    </aside>
</main>

<div id="promo-popup" class="popup hidden">
    <span id="close-popup" class="close">&times;</span>
    <h2>Enter Promo Code</h2>
    <input type="text" id="promo-code-input" placeholder="Enter code">
    <button class="btn-primary" onclick="applyPromoCode()">Apply</button>
</div>

<div id="success-popup" class="popup hidden success-message">Congratulations! 20% off!</div>
<div id="error-popup" class="popup hidden error-message">Invalid code</div>


<div id="login-popup" class="popup hidden">
    <span id="close-login-popup" class="close">&times;</span>
    <h2>Log in or Check Out as Guest</h2>
    <p>You need to log in or continue as a guest to proceed.</p>
    <a href="{{ url_for('routes.login') }}" class="btn-primary">Log In</a>
    <a href="{{ url_for('routes.guest_checkout') }}" class="btn-secondary">Check Out as Guest</a>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/basket.js') }}"></script>
{% endblock %}